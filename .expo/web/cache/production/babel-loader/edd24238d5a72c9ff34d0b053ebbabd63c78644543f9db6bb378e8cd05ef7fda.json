{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Platform from\"react-native-web/dist/exports/Platform\";import PdfProcessor from\"../../utils/PdfProcessor\";import Button from\"../shared/Button\";import FileInput from\"../shared/FileInput\";import ErrorMessage from\"../shared/ErrorMessage\";import Card from\"../shared/Card\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var CompressPDF=function CompressPDF(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(70),_useState4=_slicedToArray(_useState3,2),compressionLevel=_useState4[0],setCompressionLevel=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isProcessing=_useState6[0],setIsProcessing=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),originalSize=_useState10[0],setOriginalSize=_useState10[1];var handleFileSelect=function(){var _ref=_asyncToGenerator(function*(event){if(Platform.OS==='web'){var file=event.target.files[0];if(file){try{yield PdfProcessor.loadPDF(file);setSelectedFile(file);setOriginalSize(file.size);setError(null);}catch(err){setError(err.message);}}}});return function handleFileSelect(_x){return _ref.apply(this,arguments);};}();var handleCompressPDF=function(){var _ref2=_asyncToGenerator(function*(){if(!selectedFile){setError('Please select a PDF file');return;}setIsProcessing(true);setError(null);try{var compressedPdfBytes=yield PdfProcessor.compressPDF(selectedFile,compressionLevel);yield PdfProcessor.saveToDevice(compressedPdfBytes,\"compressed_\"+selectedFile.name);}catch(err){setError(err.message);}finally{setIsProcessing(false);}});return function handleCompressPDF(){return _ref2.apply(this,arguments);};}();return _jsxs(ScrollView,{style:{flex:1,backgroundColor:'#f7fafc'},contentContainerStyle:{padding:20},children:[_jsxs(View,{style:{marginBottom:24},children:[_jsx(Text,{style:{fontSize:24,fontWeight:'bold',color:'#2d3748',marginBottom:8},children:\"Compress PDF\"}),_jsx(Text,{style:{fontSize:16,color:'#718096',marginBottom:20},children:\"Reduce PDF file size while maintaining quality\"})]}),_jsx(FileInput,{onFileSelect:handleFileSelect,buttonText:\"Select PDF File\",style:{marginBottom:20}}),selectedFile&&_jsxs(Card,{title:\"Compression Settings\",children:[_jsx(Card.FileDetails,{fileName:selectedFile.name,fileSize:PdfProcessor.formatFileSize(originalSize),style:{marginBottom:16}}),_jsxs(Text,{style:{fontSize:16,color:'#2d3748',marginBottom:8,fontWeight:'500'},children:[\"Compression Level: \",compressionLevel,\"%\"]}),_jsx(View,{style:{marginBottom:16},children:Platform.OS==='web'?_jsx(\"input\",{type:\"range\",min:\"1\",max:\"100\",value:compressionLevel,onChange:function onChange(e){return setCompressionLevel(parseInt(e.target.value));},className:\"w-full\",style:{width:'100%',accentColor:'#f14444',height:6,borderRadius:3}}):_jsx(Slider,{value:compressionLevel,onValueChange:setCompressionLevel,minimumValue:1,maximumValue:100,step:1,minimumTrackTintColor:\"#f14444\",maximumTrackTintColor:\"#cbd5e0\"})}),_jsxs(View,{style:{flexDirection:'row',justifyContent:'space-between',marginBottom:16},children:[_jsx(Text,{style:{color:'#718096',fontSize:12},children:\"Lower Size\"}),_jsx(Text,{style:{color:'#718096',fontSize:12},children:\"Better Quality\"})]}),_jsx(Card.BulletPoint,{children:\"Higher compression = smaller file size\"}),_jsx(Card.BulletPoint,{children:\"Lower compression = better quality\"}),_jsx(Card.BulletPoint,{children:\"Recommended: 70% for balanced results\"})]}),_jsx(ErrorMessage,{message:error}),_jsx(Button,{onPress:handleCompressPDF,disabled:!selectedFile,loading:isProcessing,style:{marginBottom:24},children:isProcessing?'Compressing PDF...':'Compress PDF'}),_jsx(Card.Info,{children:\"Your files are processed locally and never leave your device. All operations are performed in your browser for maximum privacy.\"})]});};export default CompressPDF;","map":{"version":3,"names":["React","useState","View","Text","ScrollView","Platform","PdfProcessor","Button","FileInput","ErrorMessage","Card","jsx","_jsx","jsxs","_jsxs","CompressPDF","_useState","_useState2","_slicedToArray","selectedFile","setSelectedFile","_useState3","_useState4","compressionLevel","setCompressionLevel","_useState5","_useState6","isProcessing","setIsProcessing","_useState7","_useState8","error","setError","_useState9","_useState10","originalSize","setOriginalSize","handleFileSelect","_ref","_asyncToGenerator","event","OS","file","target","files","loadPDF","size","err","message","_x","apply","arguments","handleCompressPDF","_ref2","compressedPdfBytes","compressPDF","saveToDevice","name","style","flex","backgroundColor","contentContainerStyle","padding","children","marginBottom","fontSize","fontWeight","color","onFileSelect","buttonText","title","FileDetails","fileName","fileSize","formatFileSize","type","min","max","value","onChange","e","parseInt","className","width","accentColor","height","borderRadius","Slider","onValueChange","minimumValue","maximumValue","step","minimumTrackTintColor","maximumTrackTintColor","flexDirection","justifyContent","BulletPoint","onPress","disabled","loading","Info"],"sources":["/project/sandbox/user-workspace/src/components/PDFTools/CompressPDF.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, ScrollView, Platform } from 'react-native';\nimport PdfProcessor from '../../utils/PdfProcessor';\nimport Button from '../shared/Button';\nimport FileInput from '../shared/FileInput';\nimport ErrorMessage from '../shared/ErrorMessage';\nimport Card from '../shared/Card';\n\nconst CompressPDF = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [compressionLevel, setCompressionLevel] = useState(70);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n  const [originalSize, setOriginalSize] = useState(0);\n\n  const handleFileSelect = async (event) => {\n    if (Platform.OS === 'web') {\n      const file = event.target.files[0];\n      if (file) {\n        try {\n          await PdfProcessor.loadPDF(file); // Validate PDF\n          setSelectedFile(file);\n          setOriginalSize(file.size);\n          setError(null);\n        } catch (err) {\n          setError(err.message);\n        }\n      }\n    }\n  };\n\n  const handleCompressPDF = async () => {\n    if (!selectedFile) {\n      setError('Please select a PDF file');\n      return;\n    }\n\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      const compressedPdfBytes = await PdfProcessor.compressPDF(selectedFile, compressionLevel);\n      await PdfProcessor.saveToDevice(compressedPdfBytes, `compressed_${selectedFile.name}`);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <ScrollView \n      style={{ flex: 1, backgroundColor: '#f7fafc' }}\n      contentContainerStyle={{ padding: 20 }}\n    >\n      <View style={{ marginBottom: 24 }}>\n        <Text style={{ fontSize: 24, fontWeight: 'bold', color: '#2d3748', marginBottom: 8 }}>\n          Compress PDF\n        </Text>\n        <Text style={{ fontSize: 16, color: '#718096', marginBottom: 20 }}>\n          Reduce PDF file size while maintaining quality\n        </Text>\n      </View>\n\n      <FileInput\n        onFileSelect={handleFileSelect}\n        buttonText=\"Select PDF File\"\n        style={{ marginBottom: 20 }}\n      />\n\n      {selectedFile && (\n        <Card\n          title=\"Compression Settings\"\n        >\n          <Card.FileDetails\n            fileName={selectedFile.name}\n            fileSize={PdfProcessor.formatFileSize(originalSize)}\n            style={{ marginBottom: 16 }}\n          />\n          \n          <Text style={{ fontSize: 16, color: '#2d3748', marginBottom: 8, fontWeight: '500' }}>\n            Compression Level: {compressionLevel}%\n          </Text>\n          \n          <View style={{ marginBottom: 16 }}>\n            {Platform.OS === 'web' ? (\n              <input\n                type=\"range\"\n                min=\"1\"\n                max=\"100\"\n                value={compressionLevel}\n                onChange={(e) => setCompressionLevel(parseInt(e.target.value))}\n                className=\"w-full\"\n                style={{ \n                  width: '100%',\n                  accentColor: '#f14444',\n                  height: 6,\n                  borderRadius: 3,\n                }}\n              />\n            ) : (\n              <Slider\n                value={compressionLevel}\n                onValueChange={setCompressionLevel}\n                minimumValue={1}\n                maximumValue={100}\n                step={1}\n                minimumTrackTintColor=\"#f14444\"\n                maximumTrackTintColor=\"#cbd5e0\"\n              />\n            )}\n          </View>\n\n          <View style={{ \n            flexDirection: 'row', \n            justifyContent: 'space-between',\n            marginBottom: 16,\n          }}>\n            <Text style={{ color: '#718096', fontSize: 12 }}>Lower Size</Text>\n            <Text style={{ color: '#718096', fontSize: 12 }}>Better Quality</Text>\n          </View>\n\n          <Card.BulletPoint>\n            Higher compression = smaller file size\n          </Card.BulletPoint>\n          <Card.BulletPoint>\n            Lower compression = better quality\n          </Card.BulletPoint>\n          <Card.BulletPoint>\n            Recommended: 70% for balanced results\n          </Card.BulletPoint>\n        </Card>\n      )}\n\n      <ErrorMessage message={error} />\n\n      <Button\n        onPress={handleCompressPDF}\n        disabled={!selectedFile}\n        loading={isProcessing}\n        style={{ marginBottom: 24 }}\n      >\n        {isProcessing ? 'Compressing PDF...' : 'Compress PDF'}\n      </Button>\n\n      <Card.Info>\n        Your files are processed locally and never leave your device.\n        All operations are performed in your browser for maximum privacy.\n      </Card.Info>\n    </ScrollView>\n  );\n};\n\nexport default CompressPDF;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}